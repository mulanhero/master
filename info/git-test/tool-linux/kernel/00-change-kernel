====================================================================
我们有时候需要更换linux内核，比如想将Linux2.6.27的升级为Linux2.6.33到内核
1.首先下载Linux2.6.33内核并解压到/usr/src下
2.做个链接文件#ln -s /usr/src/linux2.6.33 /usr/src/linux
3.进入linux文件#cd linux
4.#make mrproper (删除以前到.o文件，初次更换可不用)
5.#make menuconfig (这里可以设置一些参数，并生成.config文件)
6.#make dep (建立依赖关系)
7.#make dep (删除没有用的文件)
8.#make bzImage (编译linux内核)
9.#make modules (编译linux模块)
10.#make modules_install (安装linux模块)
11.#make install (建立initrd文件)
12.#new-kernel-pkg --install --mkinitrd --depmod 2.6.33 (将启动信息写入grub.conf中，这里也可以去/etc/编辑grub.conf文件，将启动信息模仿原来到写进去。注：有的linux版本是lilo.conf文件)
13.#shutdown -r now （立即重启，重启后会发现多了一个linux2.6.33到启动项）
====================================================================
在安装vmware tools 的时候，需要安装rhel-5-server-i386-disc1.iso\Server中的
kernel-2.6.18-8.el5.i686.rpm
kernel-devel-2.6.18-8.el5.i686.rpm
kernel-headers-2.6.18-8.el5.i386.rpm
并且从kernel-2.6.18-8.el5.i686内核启动
====================================================================
这样RHEL 5会有多个内核，经过长期实践观察，xen内核容易出问题。。
可修改启动配置文件，更改系统默认加载的内核！
查看有两个grub.conf，分别是/etc/grub.conf，还有/boot/grub/grub.conf
两个文件应该是一样的
/etc/grub.conf: symbolic link to `../boot/grub/grub.conf'
#vi /etc/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:   You have a /boot partition.   This means that
#       all kernel and initrd paths are relative to /boot/, eg.
#       root (hd0,0)
#       kernel /vmlinuz-version ro root=/dev/sda2
#       initrd /initrd-version.img
#boot=/dev/sda
default=1
timeout=5
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title Red Hat Enterprise Linux Server (2.6.18-53.el5PAE)
       root (hd0,0)
       kernel /vmlinuz-2.6.18-53.el5PAE ro root=LABEL=/1 3 rhgb quiet
       initrd /initrd-2.6.18-53.el5PAE.img
title Red Hat Enterprise Linux Server-xen (2.6.18-53.el5xen)
       root (hd0,0)
       kernel /xen.gz-2.6.18-53.el5
       module /vmlinuz-2.6.18-53.el5xen ro root=LABEL=/1 3 rhgb quiet
       module /initrd-2.6.18-53.el5xen.img
title Red Hat Enterprise Linux Server-base (2.6.18-53.el5)
       root (hd0,0)
       kernel /vmlinuz-2.6.18-53.el5 ro root=LABEL=/1 3 rhgb quiet
       initrd /initrd-2.6.18-53.el5.img
将其中的default =1改为你需要的。（注：默认顺序是从0开始）

