----------------------------------------------------------------
1. HDFS NFS Gateway Setup
----------------------------------------------------------------
Install the Hadoop NFS gateway and portmap package on the workstation that will serve as HDFS NFS gateway and portmap:
$ sudo rpm -ivh working_dir/utility/rpm/bigtop-jsvc-<PHD_BIGTOP_JSVC_VERSION>-<nn>.x86_64.rpm
$ sudo rpm -ivh working_dir/hadoop/rpm/hadoop-hdfs-<PHD_HADOOP_VERSION>-<nn>.x86_64.rpm
$ sudo rpm -ivh working_dir/hadoop/rpm/hadoop-hdfs-nfs3-<PHD_HADOOP_VERSION>-<nn>.x86_64.rpm
$ sudo rpm -ivh working_dir/hadoop/rpm/hadoop-hdfs-portmap-<PHD_HADOOP_VERSION>-<nn>.x86_64.rpm
----------------------------------------------------------------
2. Starting NFS gateway
----------------------------------------------------------------
Three daemons are required to provide NFS service:  portmap(or rpcbind), mountd and nfsd. The NFS gateway has both mountd and nfsd.
To start the portmap and NFS gateway daemon:
Run either:
$ sudo service hadoop-hdfs-portmap start
$ sudo service hadoop-hdfs-nfs3 start
or:
$ sudo /etc/init.d/hadoop-hdfs-portmap start
$ sudo /etc/init.d/hadoop-hdfs-nfs3 start
---------------if start nfs3 failed, to bug shooting
/etc/init.d/nfs stop
/etc/init.d/portreserve stop
/etc/init.d/rpcbind stop
----------------------------------------------------------------
3. NFS client
----------------------------------------------------------------
To mount the export "/":
Make sure nfs-utils is intalled on client:
$ sudo yum install -y nfs-utils
mount:
$ mount -t nfs -o vers=3,proto=tcp,nolock <nfsserver>:/  <mount_point>
----------------------------------------------------------------
massh hamster verbose mount -t nfs -o vers=3,proto=tcp,nolock hdsh180:/  /hdfs_nfs
----------------------------------------------------------------
*************** Note: ************************
----------------------------------------------------------------
sudo -u yarn mkdir /hdfs/userlogs
on each node, 
rm -rf /var/log/gphd/hadoop-yarn/userlogs
sudo -u yarn ln -s /hdfs/userlogs /var/log/gphd/hadoop-yarn/userlogs
----------------------------------------------------------------

----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------
----------------------------------------------------------------