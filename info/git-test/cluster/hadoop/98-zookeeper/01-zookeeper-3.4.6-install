---------------------------------------------------------------------------------------
1. download
---------------------------------------------------------------------------------------
[root@cq02-modeloff-node01.cq02.sth.com nfs_share]# wget http://apache.fayea.com/apache-mirror/zookeeper/stable/zookeeper-3.4.6.tar.gz
[root@cq02-modeloff-node01.cq02.sth.com zookeeper-3.4.6]# cat /etc/bashrc
#zookeeper-3.4.6
export ZOOKEEPER_HOME=/nfs_share/zookeeper-3.4.6
export PATH=$ZOOKEEPER_HOME/bin:$PATH
[root@cq02-modeloff-node01.cq02.sth.com zookeeper-3.4.6]# for i in {2..10}; do scp /etc/bashrc node${i}:/etc/; done
---------------------------------------------------------------------------------------
2. config
---------------------------------------------------------------------------------------
[root@cq02-modeloff-node01.cq02.sth.com conf]# cat zoo.cfg 
tickTime=2000   
initLimit=10   
syncLimit=5   
dataDir=/no_share/zookeeper/data      
clientPort=2181               
server.1=node1:2888:3888
server.2=node2:2888:3888
server.3=node3:2888:3888
---------------------------------------------------------------------------------------
3. myid
---------------------------------------------------------------------------------------
[root@cq02-modeloff-node01.cq02.sth.com conf]# massh zoo verbose mkdir -p /no_share/zookeeper/data 
[root@cq02-modeloff-node01.cq02.sth.com conf]# cat /no_share/zookeeper/data/myid 
1
[root@cq02-modeloff-node01.cq02.sth.com conf]# ssh node2 'echo 2 > /no_share/zookeeper/data/myid'  
[root@cq02-modeloff-node01.cq02.sth.com conf]# ssh node3 'echo 3 > /no_share/zookeeper/data/myid'   
[root@cq02-modeloff-node01.cq02.sth.com conf]# massh zoo verbose cat /no_share/zookeeper/data/myid 
node1 : 1
node2 : 2
node3 : 3
---------------------------------------------------------------------------------------
3. start/status
---------------------------------------------------------------------------------------
[root@cq02-modeloff-node01.cq02.sth.com conf]# massh zoo verbose zkServer.sh start
[root@cq02-modeloff-node01.cq02.sth.com conf]# massh zoo verbose zkServer.sh status
node1 : JMX enabled by default
node1 : Using config: /nfs_share/zookeeper-3.4.6/bin/../conf/zoo.cfg
node1 : Mode: follower
node3 : JMX enabled by default
node3 : Using config: /nfs_share/zookeeper-3.4.6/bin/../conf/zoo.cfg
node3 : Mode: leader
node2 : JMX enabled by default
node2 : Using config: /nfs_share/zookeeper-3.4.6/bin/../conf/zoo.cfg
node2 : Mode: follower
[root@cq02-modeloff-node01.cq02.sth.com conf]# massh zoo verbose jps|grep QuorumPeerMain
node1 : 23444 QuorumPeerMain
node2 : 31346 QuorumPeerMain
node3 : 6473 QuorumPeerMain
---------------------------------------------------------------------------------------
4. stop
---------------------------------------------------------------------------------------
[root@cq02-modeloff-node01.cq02.sth.com conf]# massh zoo verbose zkServer.sh stop  
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
--------------------------------------------------------------------------
